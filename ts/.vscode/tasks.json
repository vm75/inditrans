{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
  "tasks": [
    {
      "label": "app-build-watch",
      "type": "process",
      "command": "nodemon",
      "args": [
        "-e",
        "ts,tsx,js,jsx",
        "-w",
        "./src/app",
        "-w",
        "./src/common",
        "-w",
        "./src/types",
        "-w",
        "./src/static",
        "-x",
        "yarn webpack"
      ],
      "isBackground": true,
      "problemMatcher": {
        "owner": "typescript",
        "fileLocation": "relative",
        "pattern": {
          // "regexp": "^([^:]+):(\\d+):(\\d+):\\s+(error|warning|info)\\s+(.*)$", snowpack
          // "regexp": "^([^:]+): ([^:]+): (.*) \\((\\d+):(\\d+)\\)$", webpack
          "regexp": "^Ignore-all-errors$",
          "file": 2,
          "location": 4,
          "severity": 1,
          "code": 3,
          "message": 3
        },
        "background": {
          "activeOnStart": true,
          "beginsPattern": "^assets by status",
          "endsPattern": "^webpack .* compiled successfully in .*"
        }
      },
      "options": {
        "cwd": "${workspaceRoot}"
      }
    },
    {
      "label": "server-build-watch",
      "command": "tsc",
      "args": [
        "-p",
        "tsconfig.server.json",
        "--watch"
      ],
      "isBackground": true,
      "problemMatcher": {
        "base": "$tsc-watch",
        "applyTo": "allDocuments"
      },
      "options": {
        "cwd": "${workspaceRoot}"
      }
    },
    {
      "label": "all-build-watch",
      "dependsOn": [
        "app-build-watch",
        "server-build-watch"
      ]
    },
    {
      // "type": "cppbuild",
      "label": "C/C++: clang++ build translit",
      "command": "/usr/bin/clang++",
      "args": [
        "-fdiagnostics-color=always",
        "-std=c++20",
        "-O0",
        "-o",
        "${workspaceRoot}/dist/cpp/translit",
        "-g",
        "${workspaceRoot}/wasm/cpp/translit.cpp",
        "${workspaceRoot}/wasm/cpp/test.cpp"
      ],
      "options": {
        "cwd": "${fileDirname}"
      },
      "problemMatcher": [
        "$gcc"
      ],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "detail": "compiler: /usr/bin/clang++"
    },
  ]
}